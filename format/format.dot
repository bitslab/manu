digraph structs {
  node [shape=record];
  rankdir=LR;

//  struct1 [ label="<f0> one | two | three" ];
//  struct2 [ label="<f0> one | two | three" ];
  composite [ label ="<preamble> preamble |
  <record1> record 1 |
  <record2> record 2 |
  ... |
  record N |
  <rowlist1> row-list 1 |
  ... |
  <rowlistm> row-list M |
  <rowlistpos> row-list positions\n(differential encoded)

  " ];

  preamble [ label="<epoch> 8: ms since epoch |
  1: interval\n(0=hour, 1=day) |
  4: starting record\ne.g. 0 |
  4: # of records\ne.g. 100000 |
  1: # of fields |
  1: type of field 1\n(0=int, 1=float) |
  ... |
  1: type of field K |
  <rowlistpos> 4: row-list position
  " ];

  record [ label = "<decoder>1: decoder\n*high bit = # of bytes for length |
  1-2: length\n*only for fields 1..K-1 |
  content
  " ];

  composite:preamble -> preamble:epoch [arrowhead=dot];

  preamble:rowlistpos -> composite:rowlistpos;

  composite:rowlistpos -> composite:rowlist1;
  composite:rowlistpos -> composite:rowlistm;

  composite:record1 -> record:decoder;
  composite:rowlist1 -> composite:record1;
  composite:rowlist1 -> composite:record2;
}
